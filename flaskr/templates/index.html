{% extends 'base.html' %}

{% block content %}
<div class="min-h-screen bg-fixed bg-gradient-to-br from-slate-900 to-slate-700">
    <div class="{% if items %} h-1/2 {% else %} h-screen {% endif %} content-center pb-6 sm:pb-8 lg:pb-12">
        <div class="mx-auto max-w-screen-2xl px-4 md:px-8">
            <section class="flex flex-col justify-center gap-6 sm:gap-10 md:gap-16 lg:flex-row">
                <!-- content - start -->
                <div class="flex flex-col items-center justify-center sm:text-center lg:items-center lg:py-12 lg:text-center xl:w-5/12 xl:py-24">
                    <h1 class="mb-4 text-6xl font-bold text-white">Google Map Scraper</h1>

                    <p class="mb-8 leading-relaxed text-gray-500 md:mb-12 lg:w-4/5 xl:text-lg">Effortlessly Extract Location Data from Google Maps.</p>

                    <form class="flex w-full gap-2 md:max-w-md" action="/create" method="POST">
                        <input placeholder="Search" name="search" id="search" required class="flex-1 rounded border bg-gray-50 px-3 py-2 text-gray-800 placeholder-gray-500 outline-none ring-indigo-300 transition duration-100 focus:ring" />
                        <input placeholder="Total" name="total" id="total" required class="w-full flex-1 rounded border bg-gray-50 px-3 py-2 text-gray-800 placeholder-gray-500 outline-none ring-indigo-300 transition duration-100 focus:ring" />

                        <button type="submit" class="inline-block rounded bg-indigo-500 px-8 py-2 text-center text-sm font-semibold text-white outline-none ring-indigo-300 transition duration-100 hover:bg-indigo-600 focus-visible:ring active:bg-indigo-700 md:text-base">Search</button>
                    </form>
                </div>
                <!-- content - end -->
            </section>
        </div>
    </div>
    {% if items %}
    <div class="pb-6 sm:pb-8 lg:pb-12">
        <div class="mx-auto max-w-screen-2xl px-4 md:px-8">
            <section class="justify-center">
                <!-- content - start -->
                <div class="items-center justify-center">
                    <div class="flex flex-row w-full justify-between gap-2 items-center mb-4">
                        <p class="text-2xl font-bold text-white">Data Scraper</p>
                        <div class="relative gap-2 mt-4">
                            {% if items %}
                            <a href="http://127.0.0.1:5000/export" class="inline-block mr-2 rounded bg-indigo-100 px-8 py-2 text-center text-sm font-semibold text-indigo-500 outline-none ring-indigo-50 transition duration-100 hover:bg-indigo-200 focus-visible:ring active:bg-indigo-200 md:text-base">Export</a>
                            {% endif %}
                            <a href="http://127.0.0.1:5000/delete" class="inline-block rounded bg-indigo-500 px-8 py-2 text-center text-sm font-semibold text-white outline-none ring-indigo-300 transition duration-100 hover:bg-indigo-600 focus-visible:ring active:bg-indigo-700 md:text-base">Delete</a>
                        </div>
                    </div>

                    <div class="overflow-hidden rounded-lg border border-gray-700 shadow-md">
                        <table class="w-full border-collapse bg-gray-800 text-left text-sm text-gray-500">
                            <thead class="bg-gray-700">
                            <tr>
                                <th scope="col" class="px-6 py-4 font-medium text-white">Title</th>
                                <th scope="col" class="px-6 py-4 font-medium text-white">Rate</th>
                                <th scope="col" class="px-6 py-4 font-medium text-white">Type</th>
                                <th scope="col" class="px-6 py-4 font-medium text-white">Address</th>
                            </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-600 border-t border-gray-600">
                            {% if items %}
                            {% for item in items %}
                            <tr class="hover:bg-gray-700">
                                <th class="px-6 py-4 font-medium text-white">{{ item['title'] }}</th>
                                <td class="px-6 py-4">
                                    <span class="inline-flex items-center gap-1 rounded-full bg-yellow-50 px-2 py-1 text-xs font-semibold text-yellow-600">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-3 w-3">
                                          <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" />
                                        </svg>
                                        {{ item['rate'] }}
                                    </span>
                                </td>
                                <td class="px-6 py-4">{{ item['type'] }}</td>
                                <td class="px-6 py-4">{{ item['address'] }}</td>
                            </tr>
                            {% endfor %}
                            {% else %}
                            <tr class="hover:bg-gray-50">
                                <th class="px-6 py-4 font-medium text-gray-900">-</th>
                                <th class="px-6 py-4 font-medium text-gray-900">-</th>
                                <th class="px-6 py-4 font-medium text-gray-900">-</th>
                                <th class="px-6 py-4 font-medium text-gray-900">-</th>
                            </tr>
                            {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- content - end -->
            </section>
        </div>
    </div>
    {% endif %}
</div>

{% endblock %}